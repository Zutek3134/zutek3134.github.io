<!DOCTYPE html>
<html lang="zh-tw">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>運dle — Zutek’s Secret Warehouse</title>
    <meta name="description" content="運ㄉㄡˇ，臺北、新北、桃園、臺中、高雄捷運及高鐵、臺鐵、港鐵的 wordle。">
    <meta property="og:image" content="https://zutek3134.taipei/images/yundleBanner.png">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:image" content="https://zutek3134.taipei/images/yundleBanner.png">

    <link rel="icon" type="image/x-icon" href="/images/zeeb.png">
    <link rel="alternate" hreflang="zh" href="https://zutek3134.taipei/zh-tw/lab/wordle/" />
    <link href='/stylesheets/style.css' rel='stylesheet'>
    <link href='/stylesheets/mandarinSupport.css' rel='stylesheet'>
    <link href='/js/modal/stylesheet.css' rel='stylesheet'>
    <link href='/js/tabs/stylesheet.css' rel='stylesheet'>
    <link href='/js/details/stylesheet.css' rel='stylesheet'>
    <link href='/js/snackbar/stylesheet.css' rel='stylesheet'>
    <style>
        main {
            min-height: calc(100dvh - var(--nav-height));
        }

        .scrollRect {
            width: 100%;
            display: flex;
            justify-content: center;
            margin-top: calc(-1 * var(--gap-half));
        }

        .guess {
            display: flex;
            flex-direction: row-reverse;
            width: 0;
            height: 0;
            max-width: 100%;
            overflow-x: auto;
            padding: var(--gap-half);
            --game-font-size: min(3rem, 10dvw);
            --gap: calc(var(--game-font-size) * 0.39);
            --gap-half: calc(var(--gap) * 0.5);
            --gap-quarter: calc(var(--gap-half) * 0.5);
            transition: width 0.5s ease-in-out, height 0.5s ease-in-out;
        }

        .guess .guess-row {
            margin: 0 var(--gap-quarter);
        }

        .guess-row {
            opacity: 0;
            transform: translateX(-15px);
            transition: opacity 1s ease, transform 1s ease;
        }

        .guess-row.visible {
            opacity: 1;
            transform: translateX(0);
        }

        .guess-box {
            --state-colour: var(--border);
            min-width: calc(var(--game-font-size) + var(--gap));
            height: calc(var(--game-font-size) + var(--gap));
            margin: var(--gap-quarter);
            perspective: 1000px;
        }

        .guess-box.flip .guess-box-inner {
            transform: rotateY(180deg);
        }

        .guess-box-inner {
            position: relative;
            width: 100%;
            height: 100%;
            text-align: center;
            transition: transform 0.6s;
            transform-style: preserve-3d;
        }

        .guess-row.rightLine .guess-box-back {
            --shadow-colour: var(--state-colour);
            background: var(--state-colour);
            color: var(--bg);
        }

        .guess-box.flip .guess-box-front {
            border-color: transparent;
        }

        .guess-box-back,
        .guess-box-front {
            background: transparent;
            border: calc(var(--game-font-size) * 0.04) solid var(--state-colour);
            position: absolute;
            width: 100%;
            height: 100%;
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
        }

        .guess-box-front {
            --state-colour: var(--bg-dark);
        }

        .guess-box-back {
            transform: rotateY(180deg);
            line-height: calc(var(--game-font-size) + var(--gap) * 0.75);
            font-size: var(--game-font-size);
            font-weight: 700;
            color: var(--state-colour);
            box-shadow: 0 0 10px var(--shadow-colour);
        }

        .guess-box.success {
            --state-colour: var(--success);
        }

        .guess-box.danger {
            --state-colour: var(--danger);
        }

        .typeArea {
            position: relative;
            display: flex;
            justify-content: center;
            width: max(45%, 20em);
            margin: var(--gap) auto 0 auto;
        }

        .typeArea input {
            width: 100%;
            padding: var(--gap-half);
            background: var(--card-bg);
            font-size: 1.5rem;
        }

        .typeArea .submitBtn {
            --btn-theme: var(--card-bg);
            color: var(--color);
            border-width: 1px;
        }

        .typeArea .submitBtn:not([disabled]):hover {
            color: var(--bg);
        }

        .typeArea .submitBtn:focus {
            border-color: var(--border);
        }

        .typeArea input:disabled {
            background: var(--bg);
            border-color: var(--card-bg);
        }

        #settings>.item {
            display: flex;
        }

        #settings h3 {
            margin: var(--gap-half);
        }

        #settings input {
            margin: auto;
            min-width: 3em;
        }

        #settings .btn {
            white-space: nowrap;
            width: 100%;
            padding-left: 1em;
            padding-right: 1em;
        }

        #settings .btn:not(.btn-fill):not(.disabled):not([disabled]):hover {
            --btn-bg: var(--danger);
        }

        #tut {
            flex-direction: row;
            display: flex;
            overflow-x: auto;
            padding: var(--gap-half);
            --game-font-size: min(6dvw, 3rem);
        }

        hr {
            margin-bottom: 1em;
        }

        #score-skill::before {
            content: '安全係數';
        }

        #score-luck::before {
            content: '幸運指數';
        }

        .scoreArea::before {
            display: block;
            color: var(--primary);
            font-size: 0.7em;
            opacity: 0.7;
        }

        .scoreArea::after {
            content: '%';
            margin-left: 0.2em;
            font-size: 0.6em;
        }

        #wordleBotOutput sub {
            vertical-align: baseline;
            font-size: 0.7em;
            margin-left: 0.4em;
        }

        .wordleBotDetailsIcon {
            --alert-icon: url('data: image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a2 2 0 0 1 2 2c0 .74-.4 1.39-1 1.73V7h1a7 7 0 0 1 7 7h1a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v1a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-1H2a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h1a7 7 0 0 1 7-7h1V5.73c-.6-.34-1-.99-1-1.73a2 2 0 0 1 2-2M7.5 13A2.5 2.5 0 0 0 5 15.5 2.5 2.5 0 0 0 7.5 18a2.5 2.5 0 0 0 2.5-2.5A2.5 2.5 0 0 0 7.5 13m9 0a2.5 2.5 0 0 0-2.5 2.5 2.5 2.5 0 0 0 2.5 2.5 2.5 2.5 0 0 0 2.5-2.5 2.5 2.5 0 0 0-2.5-2.5"></path></svg>');
        }
    </style>
</head>

<body>
    <nav id="nav-placeholder"></nav>
    <div id="modal-gameSettings" class="modal" data-onclose="loadGame">
        <div class="content show">
            <div class="header">
                <span class="close"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                            <path d="M12 2c5.53 0 10 4.47 10 10s-4.47 10-10 10S2 17.53 2 12 6.47 2 12 2m3.59 5L12 10.59 8.41 7 7 8.41 10.59 12 7 15.59 8.41 17 12 13.41 15.59 17 17 15.59 13.41 12 17 8.41z" />
                        </svg></span></span>
                <h2>運<span class="hanLat hl-l">dle</span></h2>
            </div>
            <div class="body">
                <h2>壹、設定</h2>
                <div class="row mar-b-3" id="settings">
                    <div class="item">
                        <h3 class="text-nowrap">最少</h3>
                        <input type="number" id="minWords" class="width-full" placeholder="預設：2" min="2" max="6" value="2">
                        <h3 class="text-nowrap">字，最多</h3>
                        <input type="number" id="maxWords" class="width-full" placeholder="預設：6" min="2" max="6" value="6">
                        <h3 class="text-nowrap">字</h3>
                    </div>
                    <div class="item">
                        <h3 class="text-nowrap">遊戲機會</h3>
                        <input type="number" id="maxAttempts" class="width-full" placeholder="預設：6" min="1" max="12" value="6">
                        <h3 class="text-nowrap">次</h3>
                    </div>
                    <label class="item-width">
                        <label class="switch-holder mar-l-05"><label class="switch">
                                <input type="checkbox" id="inputHint">
                                <span class="slider"></span>
                            </label>
                            <h3 class="switch-name">輸入建議</h3>
                        </label>
                    </label>
                    <div class="item-full">
                        <h3>路線範圍</h3>
                        <div id="selectedLines" data-tab-category="lineSelection" class="pad-rl-05">
                            <div class="tab-nav">
                                <div class="tab-nav-inner">
                                    <button class="tab-button" onclick="tabSelect('tpe', this)"><img class="twemoji" src="logo/tpe.svg" draggable="false"><img class="twemoji mar-0" src="logo/ntpe.svg" draggable="false"></button>
                                    <button class="tab-button" onclick="tabSelect('tyn', this)"><img class="twemoji" src="logo/tyn.svg" draggable="false"><img class="twemoji" src="logo/tch.svg" draggable="false"><img class="twemoji mar-0" src="logo/khs.svg" draggable="false"></button>
                                    <button class="tab-button" onclick="tabSelect('twn', this)"><img class="twemoji" src="logo/thsr.svg" draggable="false"><span class="twemoji mar-0"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 461.5 460.5">
                                                <path d="M251.6,199.9h207.9l-1.1-7.3C441.9,91.5,360.7,13.3,259,0.8L251.6,0v42.1l6.7,0.8    c64,9.4,118.7,51,145,110.1l2.6,6.2H251.6V145l0.1-2c0.6-6,4.5-11.6,9.8-14.4l1.9-0.8l36.2-14.2V72.1l-0.1-1.5    c-0.4-3-2.6-5.8-5.3-7l-1.4-0.5l-7.1-1.9c-36-8.7-73.6-8.8-109.6,0l-7.1,1.9l-1.4,0.5c-2.8,1.2-4.9,4-5.3,7l-0.1,1.5v41.5    l36.2,14.2l1.8,0.8c6,3.1,10,9.7,9.9,16.4v14.2H55.5l2.6-6.2c26.3-59.2,80.9-100.6,145-110.1l6.7-0.8V0l-7.3,0.8    C100.9,13.3,19.5,91.5,3.1,192.6L2,199.9h207.8v29.9H0l0.1,7.4l0.4,7.4c7.9,118.8,103.9,211.8,222.9,215.8l7.4,0.1l7.4-0.1    c118.9-4,215.1-97,222.8-215.8l0.4-7.4l0.1-7.4H251.6V199.9z M415,271.4l-1.6,6.5l-1.8,6.4c-23.3,77.3-93.5,131.4-174.2,134.2    l-6.7,0.1l-6.7-0.1c-80.7-2.8-150.8-56.8-174.1-134.2l-1.9-6.4l-1.6-6.5h163.3v22.1l-0.1,2c-1,7.8-6.4,14-14.1,16l-89.8,21.5    l-1.3,0.4c-3.1,1.2-5.3,4-5.8,7.3l-0.1,1.4v20.2h264.1v-20.2l-0.1-1.4c-0.4-3.2-2.7-6.2-5.8-7.3l-1.3-0.4l-89.8-21.5l-2-0.6    c-6.6-2.3-11.4-8.4-12.1-15.4l-0.1-2v-22.1H415z" />
                                            </svg></span></button>
                                    <button class="tab-button" onclick="tabSelect('hk', this)"><img class="twemoji mar-0" src="logo/hkmtr.svg" draggable="false"></button>
                                    <div class="tab-underline"></div>
                                </div>
                            </div>
                            <div data-tab-id="tpe" class="tab-content active">
                                <div class="row flex-start">
                                    <div class="item-width">
                                        <button class="btn btn-fill" data-name="tpe-br" onclick="buttonToggle(this)">文湖線</button>
                                    </div>
                                    <div class="item-width">
                                        <button class="btn btn-fill" data-name="tpe-r" onclick="buttonToggle(this)">淡水信義線</button>
                                    </div>
                                    <div class="item-width">
                                        <button class="btn btn-fill" data-name="tpe-g" onclick="buttonToggle(this)">松山新店線</button>
                                    </div>
                                    <div class="item-width">
                                        <button class="btn btn-fill" data-name="tpe-o" onclick="buttonToggle(this)">中和新蘆線</button>
                                    </div>
                                    <div class="item-width">
                                        <button class="btn btn-fill" data-name="tpe-bl" onclick="buttonToggle(this)">板南線</button>
                                    </div>
                                    <div class="item-width">
                                        <button class="btn btn-fill" data-name="ntpe-y" onclick="buttonToggle(this)">新北環狀線</button>
                                    </div>
                                    <div class="item-width">
                                        <button class="btn btn-fill" data-name="ntpe-v" onclick="buttonToggle(this)">淡海輕軌</button>
                                    </div>
                                    <div class="item-width">
                                        <button class="btn btn-fill" data-name="ntpe-k" onclick="buttonToggle(this)">安坑輕軌</button>
                                    </div>
                                    <div class="item-width">
                                        <button class="btn" data-name="tpe-lg" onclick="buttonToggle(this)">萬大中和線</button>
                                    </div>
                                    <div class="item-width">
                                        <button class="btn" data-name="ntpe-lb" onclick="buttonToggle(this)">三鶯線</button>
                                    </div>
                                    <div class="item-width">
                                        <button class="btn" data-name="tpe-mk" onclick="buttonToggle(this)">貓空纜車</button>
                                    </div>
                                </div>
                            </div>
                            <div data-tab-id="tyn" class="tab-content">
                                <div class="row flex-start">
                                    <div class="item-width">
                                        <button class="btn" data-name="tyn-a" onclick="buttonToggle(this)">桃園機場線</button>
                                    </div>
                                    <div class="item-width">
                                        <button class="btn" data-name="tyn-g" onclick="buttonToggle(this)">桃園綠線</button>
                                    </div>
                                    <div class="item-width">
                                        <button class="btn" data-name="tch-1" onclick="buttonToggle(this)">烏日文心北屯線</button>
                                    </div>
                                    <div class="item-width">
                                        <button class="btn" data-name="khs-r" onclick="buttonToggle(this)">高雄紅線</button>
                                    </div>
                                    <div class="item-width">
                                        <button class="btn" data-name="khs-o" onclick="buttonToggle(this)">高雄橘線</button>
                                    </div>
                                    <div class="item-width">
                                        <button class="btn" data-name="khs-c" onclick="buttonToggle(this)">高雄環狀輕軌</button>
                                    </div>
                                </div>
                            </div>
                            <div data-tab-id="twn" class="tab-content">
                                <div class="row flex-start">
                                    <div class="item-width">
                                        <button class="btn" data-name="tw-hsr" onclick="buttonToggle(this)">臺灣高速鐵路</button>
                                    </div>
                                    <div class="item-width">
                                        <button class="btn" data-name="tw-r-northern" onclick="buttonToggle(this)">西部幹線北段</button>
                                    </div>
                                    <div class="item-width">
                                        <button class="btn" data-name="tw-r-mountain" onclick="buttonToggle(this)">西部幹線山線</button>
                                    </div>
                                    <div class="item-width">
                                        <button class="btn" data-name="tw-r-coast" onclick="buttonToggle(this)">西部幹線海線</button>
                                    </div>
                                    <div class="item-width">
                                        <button class="btn" data-name="tw-r-southern" onclick="buttonToggle(this)">西部幹線南段</button>
                                    </div>
                                    <div class="item-width">
                                        <button class="btn" data-name="tw-r-pingtung" onclick="buttonToggle(this)">西部幹線屏東線</button>
                                    </div>
                                    <div class="item-width">
                                        <button class="btn" data-name="tw-r-yilan" onclick="buttonToggle(this)">東部幹線宜蘭線</button>
                                    </div>
                                    <div class="item-width">
                                        <button class="btn" data-name="tw-r-bayhuay" onclick="buttonToggle(this)">東部幹線北迴線</button>
                                    </div>
                                    <div class="item-width">
                                        <button class="btn" data-name="tw-r-taitung" onclick="buttonToggle(this)">東部幹線臺東線</button>
                                    </div>
                                    <div class="item-width">
                                        <button class="btn" data-name="tw-r-nanhuay" onclick="buttonToggle(this)">南迴線</button>
                                    </div>
                                    <div class="item-width">
                                        <button class="btn" data-name="tw-r-shunau" onclick="buttonToggle(this)">深澳支線</button>
                                    </div>
                                    <div class="item-width">
                                        <button class="btn" data-name="tw-r-pinghsi" onclick="buttonToggle(this)">平溪支線</button>
                                    </div>
                                    <div class="item-width">
                                        <button class="btn" data-name="tw-r-nanwan" onclick="buttonToggle(this)">內灣／六家支線</button>
                                    </div>
                                    <div class="item-width">
                                        <button class="btn" data-name="tw-r-jiji" onclick="buttonToggle(this)">集集支線</button>
                                    </div>
                                    <div class="item-width">
                                        <button class="btn" data-name="tw-r-shalwun" onclick="buttonToggle(this)">沙崙支線</button>
                                    </div>
                                </div>
                            </div>
                            <div data-tab-id="hk" class="tab-content">
                                <div class="row flex-start">
                                    <div class="item-width">
                                        <button class="btn" data-name="hk-eal" onclick="buttonToggle(this)">東鐵綫</button>
                                    </div>
                                    <div class="item-width">
                                        <button class="btn" data-name="hk-ktl" onclick="buttonToggle(this)">觀塘綫</button>
                                    </div>
                                    <div class="item-width">
                                        <button class="btn" data-name="hk-twl" onclick="buttonToggle(this)">荃灣綫</button>
                                    </div>
                                    <div class="item-width">
                                        <button class="btn" data-name="hk-isl" onclick="buttonToggle(this)">港島綫</button>
                                    </div>
                                    <div class="item-width">
                                        <button class="btn" data-name="hk-tcl" onclick="buttonToggle(this)">東涌綫</button>
                                    </div>
                                    <div class="item-width">
                                        <button class="btn" data-name="hk-tkl" onclick="buttonToggle(this)">將軍澳綫</button>
                                    </div>
                                    <div class="item-width">
                                        <button class="btn" data-name="hk-drl" onclick="buttonToggle(this)">迪士尼綫</button>
                                    </div>
                                    <div class="item-width">
                                        <button class="btn" data-name="hk-sil" onclick="buttonToggle(this)">南港島綫</button>
                                    </div>
                                    <div class="item-width">
                                        <button class="btn" data-name="hk-tml" onclick="buttonToggle(this)">屯馬綫</button>
                                    </div>
                                    <div class="item-width">
                                        <button class="btn" data-name="hk-ael" onclick="buttonToggle(this)">機場快綫</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <h2>貳、玩法</h2>
                <div class="mar-b-3">
                    <p>每次答題時，框框及底色會標示其及目標車站之差異。字數、機會、範圍等均可自上方設定中自行調整。</p>
                    <hr />
                    <div class="guess-row visible" id="tut">
                        <div class="guess-box flip">
                            <div class="guess-box-inner">
                                <div class="guess-box-back">
                                    東
                                </div>
                            </div>
                        </div>
                        <div class="guess-box flip success">
                            <div class="guess-box-inner">
                                <div class="guess-box-back">
                                    門
                                </div>
                            </div>
                        </div>
                        <div class="guess-box flip success">
                            <div class="guess-box-inner">
                                <div class="guess-box-back">
                                </div>
                            </div>
                        </div>
                        <div class="guess-box flip success">
                            <div class="guess-box-inner">
                                <div class="guess-box-back">
                                </div>
                            </div>
                        </div>
                        <div class="guess-box flip success">
                            <div class="guess-box-inner">
                                <div class="guess-box-back">
                                </div>
                            </div>
                        </div>
                        <div class="guess-box flip success">
                            <div class="guess-box-inner">
                                <div class="guess-box-back">
                                </div>
                            </div>
                        </div>
                    </div>
                    <p>如上，可由「<span class="hanLat hl-r">1</span>灰框」及「<span class="hanLat hl-r">5</span>綠框」推得以下線索：</p>
                    <ol class="informal">
                        <li>目標車站僅有<span class="hanLat">2</span>字，因有<span class="hanLat">4</span>空格為綠框；</li>
                        <li>目標車站之第二字為「門」，因「門」字為綠框；</li>
                        <li>目標車站並非位於「淡水信義線」或「中和新蘆線」，因底色非塗滿。</li>
                    </ol>
                    <p>綜上，目標車站可能為「北門」或「西門」，非「小南門」。</p>
                    <hr />
                    <div class="guess-row visible" id="tut">
                        <div class="guess-box flip danger">
                            <div class="guess-box-inner">
                                <div class="guess-box-back">
                                    海
                                </div>
                            </div>
                        </div>
                        <div class="guess-box flip danger">
                            <div class="guess-box-inner">
                                <div class="guess-box-back">
                                    山
                                </div>
                            </div>
                        </div>
                        <div class="guess-box flip">
                            <div class="guess-box-inner">
                                <div class="guess-box-back">
                                </div>
                            </div>
                        </div>
                        <div class="guess-box flip">
                            <div class="guess-box-inner">
                                <div class="guess-box-back">
                                </div>
                            </div>
                        </div>
                        <div class="guess-box flip success">
                            <div class="guess-box-inner">
                                <div class="guess-box-back">
                                </div>
                            </div>
                        </div>
                        <div class="guess-box flip success">
                            <div class="guess-box-inner">
                                <div class="guess-box-back">
                                </div>
                            </div>
                        </div>
                    </div>
                    <p>如上，可獲得以下資訊：</p>
                    <ol class="informal">
                        <li>目標車站僅有<span class="hanLat">4</span>字；</li>
                        <li>目標車站包含「海」、「山」二字，但目前位置錯誤；</li>
                        <li>目標車站並非位於「板南線」。</li>
                    </ol>
                    <p>綜上，目標車站可能為「濱海義山」。</p>
                    <hr />
                    <div class="guess-row visible rightLine" id="tut">
                        <div class="guess-box flip success">
                            <div class="guess-box-inner">
                                <div class="guess-box-back">
                                    南
                                </div>
                            </div>
                        </div>
                        <div class="guess-box flip success">
                            <div class="guess-box-inner">
                                <div class="guess-box-back">
                                    港
                                </div>
                            </div>
                        </div>
                        <div class="guess-box flip">
                            <div class="guess-box-inner">
                                <div class="guess-box-back">
                                    展
                                </div>
                            </div>
                        </div>
                        <div class="guess-box flip">
                            <div class="guess-box-inner">
                                <div class="guess-box-back">
                                    覽
                                </div>
                            </div>
                        </div>
                        <div class="guess-box flip">
                            <div class="guess-box-inner">
                                <div class="guess-box-back">
                                    館
                                </div>
                            </div>
                        </div>
                        <div class="guess-box flip success">
                            <div class="guess-box-inner">
                                <div class="guess-box-back">
                                </div>
                            </div>
                        </div>
                    </div>
                    <p>如上，可獲得以下資訊：</p>
                    <ol class="informal">
                        <li>目標車站不超過<span class="hanLat">5</span>字；</li>
                        <li>目標車站首二字為「南港」；</li>
                        <li>目標車站位於「板南線」或「文湖線」。</li>
                    </ol>
                    <p>綜上，目標車站可能為「南港」，非「南港軟體園區」。</p>
                    <hr />
                    <div class="guess-row visible rightLine" id="tut">
                        <div class="guess-box flip success">
                            <div class="guess-box-inner">
                                <div class="guess-box-back">
                                    劍
                                </div>
                            </div>
                        </div>
                        <div class="guess-box flip success">
                            <div class="guess-box-inner">
                                <div class="guess-box-back">
                                    潭
                                </div>
                            </div>
                        </div>
                        <div class="guess-box flip success">
                            <div class="guess-box-inner">
                                <div class="guess-box-back">
                                </div>
                            </div>
                        </div>
                        <div class="guess-box flip success">
                            <div class="guess-box-inner">
                                <div class="guess-box-back">
                                </div>
                            </div>
                        </div>
                        <div class="guess-box flip success">
                            <div class="guess-box-inner">
                                <div class="guess-box-back">
                                </div>
                            </div>
                        </div>
                        <div class="guess-box flip success">
                            <div class="guess-box-inner">
                                <div class="guess-box-back">
                                </div>
                            </div>
                        </div>
                    </div>
                    <p>如上，所有格子皆為綠底，表示已猜出目標車站，恭喜過關。</p>
                </div>
                <h2>參、聲明</h2>
                <p class="indent">本遊戲<q class="books">運<span class="hanLat hl-l">dle</span></q>的製作，蓋受到知名網路工程師<u>喬許・華德爾</u>之<q class="books"><a class="inlineLink" href="https://www.nytimes.com/games/wordle/index.html" target="_blank">Wordle</a></q>影響及啟發。本遊戲目的為提供在地化及新奇的遊戲體驗，無侵權、營利之意圖。本遊戲題庫為開發者自行至官方或第三公共資源手動擷取之，不存在大量濫用或占用資源行為。本遊戲僅於瀏覽紀錄中儲存設定選項，不收集使用者資料。本遊戲由<span class="hanLat">Zutek 3134</span>獨立開發而成，且不熟悉之題庫內容亦已交由同好覆覈。</p>
                <p class="indent">本遊戲也特地開發<q>運斗ㄟㄞ</q>，同為<span class="hanLat">Zutek 3134</span>所獨立製作。原用於學習、推理、篩選最佳解答以快速縮小潛在答案範圍，進而有效地破關；後另兼分析使用者答案之功能，判斷其中之策略謀劃及運氣成分。如欲體驗，請將下方選項開啟，運斗ㄟㄞ將於遊戲結束時產出一份報告。</p>
                <div class="row">
                    <div id="wordleBotButton" class="item btn btn-secondary" onclick="buttonToggle(this)"><span class="twemoji"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                                <path d="M12 2a2 2 0 0 1 2 2c0 .74-.4 1.39-1 1.73V7h1a7 7 0 0 1 7 7h1a1 1 0 0 1 1 1v3a1 1 0 0 1-1 1h-1v1a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-1H2a1 1 0 0 1-1-1v-3a1 1 0 0 1 1-1h1a7 7 0 0 1 7-7h1V5.73c-.6-.34-1-.99-1-1.73a2 2 0 0 1 2-2M7.5 13A2.5 2.5 0 0 0 5 15.5 2.5 2.5 0 0 0 7.5 18a2.5 2.5 0 0 0 2.5-2.5A2.5 2.5 0 0 0 7.5 13m9 0a2.5 2.5 0 0 0-2.5 2.5 2.5 2.5 0 0 0 2.5 2.5 2.5 2.5 0 0 0 2.5-2.5 2.5 2.5 0 0 0-2.5-2.5" />
                            </svg></span>啟用<q>運斗ㄟㄞ</q>智慧分析</div>
                </div>
                <p class="indent">為避免遊戲從推理變質為套公式，強烈建議使用者於開啟上方選項前自行摸索遊戲，找出自己破關的規律，並享受過程，而非一昧帶入、背誦答案。開發者認為，這是機器人才該做的事情，故先行上刀山下火海地訓練出<q>運斗ㄟㄞ</q>。當使用者已準備好挑戰ㄟㄞ，便可開啟選項，與之一較高下。</p>
                <p class="indent">敬祝　遊戲愉快</p>
            </div>
            <div class="footer">
                <p class="text-centre">關閉此頁面後，直至下次重新整理網頁前，皆不可再次存取。</p>
            </div>
        </div>
    </div>
    <main>
        <div class="container">
            <h1 class="text-centre">運<span class="hanLat hl-l">dle</span></h1>
            <div class="scrollRect">
                <div class="guess" id="genField">
                </div>
            </div>
            <div class="typeArea">
                <input list="guessesList" type="text" id="inputField" placeholder="輸入車站名稱" style="border-radius: var(--gap-half) 0 0 var(--gap-half);">
                <button class="btn btn-fill submitBtn" onclick="handleEnterButton()" style="border-radius: 0 var(--gap-half) var(--gap-half) 0;"><span class="twemoji" style="margin-right: 0.1em;"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
                            <path d="M498.1 5.6c10.1 7 15.4 19.1 13.5 31.2l-64 416c-1.5 9.7-7.4 18.2-16 23s-18.9 5.4-28 1.6L284 427.7l-68.5 74.1c-8.9 9.7-22.9 12.9-35.2 8.1S160 493.2 160 480v-83.6c0-4 1.5-7.8 4.2-10.8l167.6-182.8c5.8-6.3 5.6-16-.4-22s-15.7-6.4-22-.7L106 360.8l-88.3-44.2C7.1 311.3.3 300.7 0 288.9s5.9-22.8 16.1-28.7l448-256c10.7-6.1 23.9-5.5 34 1.4" />
                        </svg></span></button>
            </div>
            <div class="display-flex width-full mar-t-1">
                <button id="replayBtn" class="btn btn-fill mar-auto display-none" onclick="location.reload();">再玩一次</button>
            </div>
            <p class="text-centre" style="margin-right: -0.75em;"><a class="inlineLink" href="/metro/" target="_blank">捷運小工具<span style="font-size: 0.7em">（新分頁）</span></a></p>
        </div>
        <div class="container display-none" id="wordleBotOutputContainer">
            <details class="wordleBotDetailsIcon">
                <summary>運斗ㄟㄞ研究室</summary>
                <div>
                    <div class="row">
                        <div class="item">
                            <p class="mar-0 display text-centre"><span class="scoreArea" id="score-skill">0</span></p>
                        </div>
                        <div class="item">
                            <p class="mar-0 display text-centre"><span class="scoreArea" id="score-luck">0</span></p>
                        </div>
                    </div>
                    <div class="table-container mar-t-1">
                        <table id="wordleBotOutput" class="text-centre">
                            <tr>
                                <th style="width: 6em;">所猜站名</th>
                                <th style="width: 4em;">安全係數</th>
                                <th style="width: 4em;">幸運指數</th>
                                <th style="width: 4em;">潛在答案數量</th>
                                <th style="width: 10em;">ㄟㄞ首選</th>
                                <th style="width: 10em;">ㄟㄞ次選</th>
                            </tr>
                        </table>
                    </div>
                </div>
            </details>
        </div>
        <div class="container display-none">
            <div class="card">
                <div class="title">
                    <h3 class="mar-0 text-centre">作弊不可取</h3>
                </div>
                <div class=" body">
                    <!-- 請勿作弊，作弊可恥 -->
                    <p id="possibleSolutions" class="mar-0"></p>
                </div>
            </div>
        </div>
    </main>
    <footer id="footer-placeholder"></footer>
    <script src="/includes/includes.js" data-comments></script>
    <script src="/js/tabs/script.js"></script>
    <script src="/js/modal/script.js"></script>
    <script src="/js/details/script.js"></script>
    <script src="/js/snackbar/script.js"></script>
    <script src="/js/autocomplete/script.js"></script>
    <script>
        function buttonToggle(element) {
            if (element.classList.contains('disabled'))
                return;

            element.classList.toggle('btn-fill');
        }

        var handleEnterButton;

        function loadGame() {
            const minLength = Math.max(document.querySelector('#minWords').value, 2);
            const maxLength = Math.min(document.querySelector('#maxWords').value, 6);
            const maxAttempts = Math.min(Math.max(document.querySelector('#maxAttempts').value, 1), 12);
            const selectedLinesElements = Array.from(document.querySelectorAll(`#selectedLines .btn-fill`));
            let selectedLines = [];
            const enableHint = document.querySelector('#inputHint').checked;
            const enableBot = document.querySelector('#wordleBotButton').classList.contains('btn-fill');
            if (!enableBot)
                document.getElementById('wordleBotOutputContainer').style.display = "none";

            selectedLinesElements.forEach((element) => {
                selectedLines.push(element.getAttribute('data-name'));
            })

            const settings = {
                maxLength,
                minLength,
                maxAttempts,
                selectedLines,
                enableHint,
                enableBot
            };
            localStorage.setItem('wordleSettings', JSON.stringify(settings));

            let currentRow = 0;
            let fullData = [];
            let wordList = [];
            let targetWord = "";
            let paddedTarget = "";
            let targetLine = [];

            let isGameOver = false;
            let isUselessGuess = false;
            let userData = { skill: [], luck: [], guess: [], botGuess: [] };

            let wordleBotList = [];
            let wordleBotLines = [];
            let wordleBotAnalysis = [];
            let wordleBotListDifferences = 0;
            let wordleBotTotalPossibleCount = 0;
            let wordleBotTargetLength = 0;

            const grid = document.getElementById('genField');
            const inputField = document.getElementById('inputField');
            const submitBtn = document.querySelector('button.submitBtn');
            const scoreSkill = document.getElementById('score-skill');
            const scoreLuck = document.getElementById('score-luck');
            const wordleBotGuesses = document.getElementById('possibleSolutions');
            const wordleBotOutput = document.getElementById('wordleBotOutput');

            const replaceList = {
                "七哩岸": "唭哩岸",
                "廣慈奉天宮": "廣慈／奉天宮",
                "中坡": "廣慈／奉天宮",
                "林光": "麟光",
                "下安": "廈安",
                "高樓大廈安": "廈安",
                "夏安": "廈安",
                "新是一路": "新市一路",
                "海珊": "海山",
                "聯城錦和": "連城錦和",
                "聯成錦和": "連城錦和",
                "連成錦和": "連城錦和",
                "新店市公所": "新店區公所"
            };

            const verticalList = ["（", "）"];

            async function loadDictionary() {
                const response = await fetch("data.json");
                fullData = await response.json();
                wordList = Object.keys(fullData).filter(function (word) {
                    return word.length >= minLength && word.length <= maxLength && fullData[word].some((line) => selectedLines.includes(line));
                });
                selectRandomWord();
            }

            function selectRandomWord() {
                if (wordList.length <= 0) {
                    showMessage("設定有誤");
                    controlInputs();
                    return;
                }

                const randomIndex = Math.floor(Math.random() * wordList.length + Date.now() % wordList.length) % wordList.length;
                targetWord = wordList[randomIndex];
                //targetWord = "忠孝新生";
                paddedTarget = targetWord.padEnd(maxLength, ' ');
                targetLine = getLinesForStation(targetWord);

                if (enableHint) {
                    const inputField = document.getElementById('inputField');
                    let sortWordList = Array.from(wordList);
                    sortWordList.sort((a, b) => {
                        if (a.length !== b.length) return a.length - b.length;
                        return a.localeCompare(b, 'zh-Hant');
                    });
                    setupAutocomplete(inputField, sortWordList);
                }

                wordleBotList = Array.from(wordList);
                wordleBotList.forEach((word, index) => wordleBotList[index] = word.padEnd(maxLength, ' '));
                wordleBotLines = Array.from(selectedLines);
                wordleBotTotalPossibleCount = wordleBotList.length;
                runAlgo();
            }

            function getLinesForStation(name) {
                return fullData[name.trim()].filter(line => selectedLines.includes(line)) || [];
            }

            function shareLine(station, line = targetLine) {
                const guessline = getLinesForStation(station.trim());
                return line.some(line => guessline.includes(line));
            }

            function runAlgo() {
                const isItLuckTime = wordleBotAnalysis.length > 0 && wordleBotAnalysis[0].score === wordleBotAnalysis[wordleBotAnalysis.length - 1].score;

                if (userData['guess'].length > 0) {
                    let curScore;

                    if ((wordleBotListDifferences === 0 && !isGameOver) || (isUselessGuess)) {
                        curScore = 0;
                    }
                    else if (isItLuckTime) {
                        curScore = -1;
                    }
                    else {
                        const guess = userData['guess'][currentRow].trim();
                        wordleBotAnalysis.every(obj => {
                            if (obj['word'].trim() === guess) {
                                curScore = 99 * obj['score'] / wordleBotAnalysis[0]['score'];
                                return false;
                            }
                            return true;
                        });
                        curScore = Math.round(curScore * 10) / 10;
                    }
                    userData['skill'].push(curScore);

                    if (userData['skill'].length > 0) {
                        let fullScore = 0;
                        let skillNull = 0;
                        userData['skill'].forEach(s => {
                            if (s >= 0)
                                fullScore += s;
                            else
                                skillNull++;
                        });
                        fullScore = Math.round(fullScore / (userData['skill'].length - skillNull) * 10) / 10;
                        scoreSkill.textContent = fullScore;
                    } else {
                        scoreSkill.textContent = '--';
                    }
                }

                wordleBotAnalysis = new Array(wordleBotList.length);

                const letterFrequency = {};
                const lineFrequency = {};
                let transferStationCount = 0;

                wordleBotList.forEach(word => {
                    for (const letter of word) {
                        letterFrequency[letter] = (letterFrequency[letter] || 0) + (letter === " " ? (wordleBotTargetLength === 0 ? 1 : 0) : 1);
                    }

                    const lines = getLinesForStation(word);
                    for (const line of lines) {
                        lineFrequency[line] = (lineFrequency[line] || 0) + 1;
                    }

                    if (lines.length > 1) transferStationCount++;
                });

                const lineFreqArr = Object.keys(lineFrequency).map((key) => [key, lineFrequency[key]]).sort((a, b) => b[1] - a[1]);
                const lineWithMostSta = lineFreqArr[0];
                const remainingLines = wordleBotLines.length;
                const lineMedianSta = calculateMedian(Object.values(lineFrequency));
                const threshold = lineWithMostSta[1] > 1;
                const letterWeight = (threshold && transferStationCount > 0) ? 0.7 : 1;
                const lineWeight = ((remainingLines > 2 || transferStationCount === 0) && (lineWithMostSta[1] > 1)) ? threshold ? 1 : 0.5 : 0;

                wordleBotList.forEach((word, index) => {
                    let score = 0;

                    for (const letter of word) {
                        score += (letterFrequency[letter] || 0) * letterWeight;
                    }

                    const lines = getLinesForStation(word);
                    lines.forEach(line => {
                        if (lines.length < 2 && !threshold)
                            return;

                        const mostStaLine = (line === lineWithMostSta[0]) && threshold ? 2 : 1;
                        score += (lineFrequency[line] || 0) * lineWeight * mostStaLine;
                    });

                    score = Math.round(score);

                    wordleBotAnalysis[index] = { word, score };
                });

                wordleBotAnalysis.sort((a, b) => b.score - a.score);

                //console.log(wordleBotAnalysis);

                function calculateMedian(arr) {
                    const sorted = [...arr].sort((a, b) => a - b);
                    const mid = Math.floor(sorted.length / 2);
                    return sorted.length % 2 === 0 ? (sorted[mid - 1] + sorted[mid]) / 2 : sorted[mid];
                }

                if (userData['guess'].length > 0) {
                    if (wordleBotTotalPossibleCount > 1) {
                        let curLuck = -1;

                        if (wordleBotListDifferences === 0) {
                            curLuck = 0;
                        }
                        else if (isItLuckTime && !isUselessGuess) {
                            curLuck = isGameOver ? 100 : 0;
                        }
                        else {
                            curLuck = (1 - ((wordleBotList.length - 1) / wordleBotTotalPossibleCount)) * 100;
                        }

                        curLuck = Math.round(curLuck * 10) / 10;
                        userData['luck'].push(curLuck);

                        let fullLuck = 0;
                        let luckNull = 0;
                        userData['luck'].forEach(s => {
                            if (s >= 0)
                                fullLuck += s;
                            else
                                luckNull++
                        });
                        fullLuck = Math.round(fullLuck / (userData['luck'].length - luckNull) * 10) / 10;
                        scoreLuck.textContent = fullLuck;
                    }

                    wordleBotTotalPossibleCount = wordleBotList.length;

                    const skillString = userData['skill'][currentRow] >= 0 ? ` scoreArea">${userData['skill'][currentRow]}` : '">--';
                    const luckString = userData['luck'][currentRow] >= 0 ? ` scoreArea">${userData['luck'][currentRow]}` : '">--';
                    const potentialString = !isGameOver ? `${wordleBotTotalPossibleCount} <sub>-${wordleBotListDifferences}</sub>` : '--';
                    const wordleBotGuessRow = userData['botGuess'][currentRow][1] != "" ? `<td>${userData['botGuess'][currentRow][0]}</td><td>${userData['botGuess'][currentRow][1]}</td>` : `<td colspan="2">${userData['botGuess'][currentRow][0]}`;
                    wordleBotOutput.innerHTML += `
                        <tr>
                            <td class="text-nowrap">${userData['guess'][currentRow]}</td>
                            <td class="text-nowrap${skillString}</td>
                            <td class="text-nowrap${luckString}</td>
                            <td>${potentialString}</td>
                            ${wordleBotGuessRow}
                        </tr>
                        `;
                }

                let bestOptions = new Array();
                let optionIndex = 0;
                let optionScore = 0;
                for (let index = optionIndex; index < wordleBotAnalysis.length; index++) {
                    if (wordleBotAnalysis[index].score < optionScore)
                        break;

                    optionIndex = index;
                    bestOptions.push(`<span class="text-nowrap">${wordleBotAnalysis[index].word.trim()}</span>`);
                    optionScore = wordleBotAnalysis[index].score;
                }
                optionIndex++;

                let runnerUpOptions = new Array();
                for (let index = optionIndex; index < Math.min(4, wordleBotAnalysis.length); index++) {
                    runnerUpOptions.push(`<span class="text-nowrap">${wordleBotAnalysis[index].word.trim()}</span>`);
                }

                userData['botGuess'].push([bestOptions.join('、'), runnerUpOptions.join('、')]);
                // console.log(wordleBotAnalysis[0].word, wordleBotAnalysis, userData);
            }

            function createGrid() {
                for (let i = 0; i < maxAttempts; i++) {
                    const row = document.createElement('div');
                    row.classList.add('guess-row');
                    row.id = `r${i}`;
                    for (let j = 0; j < maxLength; j++) {
                        const tile = document.createElement('div');
                        tile.classList.add('guess-box');
                        tile.setAttribute('data-row', i);
                        tile.setAttribute('data-col', j);

                        const tileInner = document.createElement('div');
                        tileInner.classList.add('guess-box-inner');

                        const tileFront = document.createElement('div');
                        tileFront.classList.add('guess-box-front');

                        const tileBack = document.createElement('div');
                        tileBack.classList.add('guess-box-back');

                        tileInner.appendChild(tileBack);
                        tileInner.appendChild(tileFront);
                        tile.appendChild(tileInner);
                        row.appendChild(tile);
                    }
                    grid.appendChild(row);
                }
            }

            function createGridNew() {
                const row = document.createElement('div');
                row.classList.add('guess-row');
                row.id = `r${grid.children.length}`;
                for (let j = 0; j < maxLength; j++) {
                    const tile = document.createElement('div');
                    tile.classList.add('guess-box');
                    tile.setAttribute('data-row', grid.children.length);
                    tile.setAttribute('data-col', j);

                    const tileInner = document.createElement('div');
                    tileInner.classList.add('guess-box-inner');

                    const tileFront = document.createElement('div');
                    tileFront.classList.add('guess-box-front');

                    const tileBack = document.createElement('div');
                    tileBack.classList.add('guess-box-back');

                    tileInner.appendChild(tileBack);
                    tileInner.appendChild(tileFront);
                    tile.appendChild(tileInner);
                    row.appendChild(tile);
                }
                grid.appendChild(row);

                void row.offsetWidth;

                row.classList.add('visible');

                grid.style.width = grid.scrollWidth + 'px';

                if (grid.scrollWidth > window.innerWidth)
                    sideScroll(grid, "left", 25, 100, 5);
            }

            function handleEnter() {
                let rawguess = inputField.value.trim()
                    .replace('/', '／')
                    .replace('(', '（')
                    .replace(')', '）')
                    .replace('台', '臺')
                    .replace('口其', '唭')
                    .replace('但金', '淡金')
                    .replace('虫內', '蚋')
                    .replace('加辣', '加蚋');

                if (Object.keys(replaceList).includes(rawguess))
                    rawguess = replaceList[rawguess];

                const guess = rawguess;

                inputField.value = "";
                inputField.dispatchEvent(new Event("input"))

                if (['放棄', '投降', '答案', '不知道', '不曉得'].includes(guess)) {
                    showMessage(targetWord);
                    controlInputs(targetWord);
                    document.getElementById('wordleBotOutputContainer').classList.remove('display-none');
                    return;
                }
                else if (userData['guess'][currentRow - 1] === "龍山寺" && guess === "天后宮") {
                    showMessage("雕刻精美唐山公");
                    return;
                }

                const paddedGuess = guess.padEnd(maxLength, ' ');

                if (!wordList.includes(guess)) {
                    if (!fullData[guess]) {
                        showMessage("查無此站");
                        return;
                    }

                    showMessage("不在所選範圍內");
                    return;
                }

                checkGuess(paddedGuess);
            }

            handleEnterButton = handleEnter;

            function checkGuess(guess) {
                userData['guess'].push(guess.trim());
                isGameOver = guess.trim() === targetWord;
                isUselessGuess = !wordleBotList.includes(guess);

                const curRowDiv = document.querySelector(`#r${currentRow}`);
                const rowTiles = Array.from(grid.querySelectorAll(`.guess-box[data-row="${currentRow}"]`));
                const targetLetters = paddedTarget.split('');
                const guessLetters = guess.split('');
                let wordleBotFeedback = new Array(maxLength);

                wordleBotGuesses.textContent = "";

                rowTiles.forEach((tile, index) => {
                    tile.classList.remove('success', 'danger')

                    const letter = guessLetters[index];
                    tile.querySelector('.guess-box-back').textContent = letter;

                    if (verticalList.includes(letter)) {
                        tile.querySelector('.guess-box-back').classList.add('text-vertical');
                    }

                    if (letter === targetLetters[index]) {
                        tile.classList.add('success');
                        targetLetters[index] = null;

                        if (letter != " ") {
                            wordleBotList = wordleBotList.filter((word) => word.split("")[index] === letter);
                            // console.log(`保留「${letter}」於第 ${index + 1} 位者，賸餘 ${wordleBotList.length} 站`);
                        }
                    }
                });

                rowTiles.forEach((tile, index) => {
                    const letter = guessLetters[index];
                    const inTargetPos = targetLetters.indexOf(letter);

                    if (!tile.classList.contains('success') && targetLetters.includes(letter)) {
                        tile.classList.add('danger');
                        targetLetters[inTargetPos] = null;

                        if (letter != " ") {
                            wordleBotList = wordleBotList.filter((word) => word.split("").some((wordletter, i) => letter === wordletter && i != index));
                            // console.log(`保留含「${letter}」字且不在第 ${index + 1} 位者，賸餘 ${wordleBotList.length} 站`);
                        }
                    }
                    else if (!paddedTarget.split('').includes(letter) && letter != " ") {
                        wordleBotList = wordleBotList.filter((word) => !word.split("").some((wordletter, i) => letter === wordletter));
                        // console.log(`捨去含「${letter}」字者，賸餘 ${wordleBotList.length} 站`);
                    }

                    setTimeout(() => {
                        tile.classList.add('flip');
                    }, index * 100);
                });

                const guessedLine = getLinesForStation(guess.trim());
                if (shareLine(guess.trim())) {
                    curRowDiv.classList.add('rightLine');
                    wordleBotList = wordleBotList.filter((word) => shareLine(word, guessedLine));
                    wordleBotLines = Array.from(guessedLine);
                    // console.log(`保留屬於「${guessedLine.join('、')}」者，賸餘 ${wordleBotList.length} 站`);
                }
                else {
                    wordleBotList = wordleBotList.filter((word) => !shareLine(word, guessedLine));
                    guessedLine.forEach(line => {
                        index = wordleBotLines.indexOf(line);
                        if (index > -1) {
                            wordleBotLines.splice(index, 1);
                        }
                    })
                    // console.log(`捨去屬於「${guessedLine.join('、')}」者，賸餘 ${wordleBotList.length} 站`);
                }

                if (wordleBotTargetLength === 0) {
                    if ((guess.trim().length === minLength && guess.trim().length <= targetWord.length) || (guess.trim().length < targetWord.length)) {
                        wordleBotTargetLength = targetWord.length;
                        wordleBotList = wordleBotList.filter((word) => word.trim().length === wordleBotTargetLength);
                        // console.log(`保留字數長為「${wordleBotTargetLength}」者，賸餘 ${wordleBotList.length} 站`);
                    }
                }

                wordleBotListDifferences = wordleBotTotalPossibleCount - wordleBotList.length;
                if (isUselessGuess) {
                    showMessage(`此站已被排除`);
                }
                else if (wordleBotListDifferences * 1.5 > wordleBotTotalPossibleCount && wordleBotTotalPossibleCount >= 100) {
                    showMessage(`摒除了<span class="hanLat">${wordleBotListDifferences}</span>站`);
                }
                else if (wordleBotListDifferences * 1.5 > wordleBotTotalPossibleCount && wordleBotTotalPossibleCount < 20 && wordleBotListDifferences > 1) {
                    showMessage(`範圍已縮小至<span class="hanLat">${wordleBotTotalPossibleCount - wordleBotListDifferences}</span>站`);
                }

                runAlgo();

                if (isGameOver) {
                    showMessage("恭喜");
                    controlInputs();
                    document.querySelector('.typeArea').style.display = "none";
                    document.getElementById('wordleBotOutputContainer').classList.remove('display-none');
                    return;
                }

                currentRow++;

                if (currentRow >= maxAttempts) {
                    showMessage(targetWord);
                    controlInputs(targetWord);
                    document.getElementById('wordleBotOutputContainer').classList.remove('display-none');
                    return;
                }

                createGridNew();
            }

            function controlInputs(innerText = "") {
                inputField.placeholder = innerText;
                inputField.disabled = true;
                submitBtn.disabled = true;

                document.querySelector('#replayBtn').classList.remove('display-none');
            }

            inputField.addEventListener('keydown', (e) => {
                if (e.key === 'Enter') {
                    handleEnter();
                }
            });

            loadDictionary();
            // createGrid();
            createGridNew();
            grid.style.height = grid.scrollHeight + 10 + 'px';
        }

        setTimeout(function () {
            document.querySelectorAll('[data-tab-category]').forEach(initTabs);
        }, 100);

        const savedSettings = localStorage.getItem('wordleSettings');
        if (savedSettings) {
            const { maxLength, minLength, maxAttempts, selectedLines, enableHint, enableBot } = JSON.parse(savedSettings);

            document.querySelector('#maxWords').value = Math.min(maxLength, 6);
            document.querySelector('#minWords').value = Math.max(minLength, 2);
            document.querySelector('#maxAttempts').value = Math.min(Math.max(maxAttempts, 1), 12);

            document.querySelectorAll(`#selectedLines .btn`).forEach((element) => {
                if (selectedLines.includes(element.getAttribute('data-name'))) {
                    element.classList.add('btn-fill');
                } else {
                    element.classList.remove('btn-fill');
                }
            });

            document.querySelector('#inputHint').checked = enableHint;

            if (enableBot)
                document.querySelector('#wordleBotButton').classList.add('btn-fill');
        }

        openModal('gameSettings');

        function sideScroll(element, direction, speed, distance, step) {
            scrollAmount = 0;
            var slideTimer = setInterval(function () {
                if (direction == 'left') {
                    element.scrollLeft -= step;
                } else {
                    element.scrollLeft += step;
                }
                scrollAmount += step;
                if (scrollAmount >= distance) {
                    window.clearInterval(slideTimer);
                }
            }, speed);
        }
    </script>
</body>

</html>